# Supabase Database Schema Setup

Run the following SQL commands in your Supabase project's SQL Editor to create the necessary tables for the application to function correctly. This will resolve the `404 Not Found` errors you are seeing in the console.

---

### 1. Create the `estates` table

This table will store information about each managed estate.

```sql
CREATE TABLE public.estates (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  name TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);
```

---

### 2. Create the `residents` table

This table will store residents, linked to an estate.

```sql
CREATE TABLE public.residents (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  estate_id UUID REFERENCES public.estates(id) ON DELETE CASCADE NOT NULL,
  name TEXT,
  email TEXT,
  phone TEXT,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);
```

---

### 3. Create the `guards` table

This table will store guards, also linked to an estate.

```sql
CREATE TABLE public.guards (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  estate_id UUID REFERENCES public.estates(id) ON DELETE CASCADE NOT NULL,
  name TEXT,
  email TEXT,
  phone TEXT,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);
```

---

### 4. Create the `notifications` table

This table will store notifications for users.

```sql
CREATE TABLE public.notifications (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  message TEXT NOT NULL,
  is_read BOOLEAN DEFAULT false NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);
```

---

After running these commands in your Supabase SQL Editor, the `404` errors should be resolved, and your application will be able to fetch data correctly.
